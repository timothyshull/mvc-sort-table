!function(t){"use strict";function e(t,e){var o=this;o.model=t,o.view=e,o._pageCount=[],o._displayBounds=[0,49],o._currentSort={"sort?":!1,col:void 0,ascDesc:void 0}}e.prototype.setView=function(t){var e=t.substring(1),o=e||"";this._updateFilterState(o)},e.prototype.addValue=function(t){var e=this;e.model.create(t,function(){e.setView(document.location.hash)})},e.prototype._sort=function(t){var e=this;void 0===e._currentSort.col||e._currentSort.col!==t?(e._currentSort.col=t,e._currentSort.ascDesc="asc",e.model.sort(t,e._currentSort.ascDesc)):"asc"===e._currentSort.ascDesc?(e._currentSort.ascDesc="desc",e.model.sort(t,e._currentSort.ascDesc)):(e._currentSort.ascDesc="asc",e.model.sort(t,e._currentSort.ascDesc)),e._currentSort["sort?"]=!0,e.setView(document.location.hash)},e.prototype._initializeBindings=function(){var t=this;t.view.bind("addValue",function(e){t.addValue(e)}),t.view.bind("sortValues",function(e){t._sort(e)})},e.prototype._updateBounds=function(){var t,e=this;e._displayBounds[0]=50*(e._activeRoute-1),e._displayBounds[1]=50*(e._activeRoute-1)+49,e.model.read(function(e){t=e}),t.values=t.values.slice(e._displayBounds[0],e._displayBounds[1]+1),t.pageCount=e._pageCount,e.view.render(t),e._initializeBindings()},e.prototype._filter=function(){var e,o,i,n,r,s=this._activeRoute;this.model.getValuesCount(function(t){i=t}),n=function(){return i%50===0?i/50:Math.floor(i/50)+1}(),this._pageCount=function(){var t=[],e;for(e=0;n>e;e+=1)t[e]=e+1;return t}(),this._updateBounds(),this._routeBound=this._pageCount.length,Number(document.location.hash.substring(1))>this._routeBound&&(r=document.location.href,r=r.substring(0,r.indexOf("#")),r=r+"#"+this._routeBound,t.location.replace(r)),1===s?(e=s,o=s+1,this.view.$prevPage.href="#"+String(e),this.view.$nextPage.href="#"+String(o),this.view.$prevPage.style.pointerEvents="none",this.view.$nextPage.style.pointerEvents="auto"):s===this._routeBound?(e=s-1,o=s,this.view.$prevPage.href="#"+String(e),this.view.$nextPage.href="#"+String(o),this.view.$nextPage.style.pointerEvents="none",this.view.$prevPage.style.pointerEvents="auto"):(e=s-1,o=s+1,this.view.$prevPage.href="#"+String(e),this.view.$nextPage.href="#"+String(o),this.view.$nextPage.style.pointerEvents="auto",this.view.$prevPage.style.pointerEvents="auto"),this._lastActiveRoute=s},e.prototype._updateFilterState=function(t){this._activeRoute=Number(t),""===t&&(this._activeRoute=1),this._filter()},t.app=t.app||{},t.app.Controller=e}(window);